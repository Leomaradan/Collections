<div *ngIf="loading > 0" class="loader">
    <img src="assets/ajax-loader-small.gif">
</div>
<ol *ngIf="filterBy" class="breadcrumb">
      <li class="breadcrumb-item"><a [routerLink]="['/'+appUrl+'/']">{{ appTitre }}</a></li>
      <li class="breadcrumb-item active">Filtré par {{ filterBy }}</li>
</ol>
<ol *ngIf="!filterBy" class="breadcrumb">
      <li class="breadcrumb-item active">{{ appTitre }}</li>
</ol>

<h1>{{appTitre}}</h1>
<table class="table">
    <tr>
        <th colspan="2">Titre</th>
        <th>Genre</th>
        <th *ngIf="features.indexOf('serie') !== -1">Série</th>
        <th *ngIf="features.indexOf('volume') !== -1">Volume</th>
        <th>Auteur(s)</th>
        <th *ngIf="features.indexOf('volume_possedes') !== -1">Volumes</th>
    </tr>
    <tr *ngFor="let item of items.data">
        <td class="list_couverture"><img [src]="item.getCouverture()" /></td>
        <td><a [routerLink]="['/'+appUrl+'/'+item.id]">{{ item.titre }}</a><span *ngIf="features.indexOf('format') !== -1">
                <a *ngFor="let format of item.format" [routerLink]="['/'+appUrl+'/format/'+format]"><img [src]="getIcon(format)" class="format_icon" /></a>
            </span></td>
        <td><a [routerLink]="['/'+appUrl+'/genre/'+item.genre.id]">{{ item.genre.nom }}</a></td>
        <td *ngIf="features.indexOf('serie') !== -1"><a *ngIf="item.serie" [routerLink]="['/'+appUrl+'/serie/'+item.serie.id]">{{ item.serie.nom }}</a></td>
        <td *ngIf="features.indexOf('volume') !== -1">{{ item.volume }}</td>
        <td class="app_list"><span *ngFor="let auteur of item.auteurs"><a [routerLink]="['/'+appUrl+'/auteur/'+auteur.id]">{{ auteur.nom }}</a></span></td>
        <td *ngIf="features.indexOf('volume_possedes') !== -1">{{ item.volumes.length }} / {{ item.volume_max }}</td>
    </tr>
</table>

<ngb-pagination *ngIf="items.pagination.nb_pages" 
    [collectionSize]="items.pagination.nb_items" 
    [(page)]="items.pagination.page" 
    [pageSize]="items.pagination.perPage"
    [maxSize]="5" 
    [rotate]="true" 
    [boundaryLinks]="true"
    (pageChange)="pageChange($event)"></ngb-pagination>

<div class="action_menu">
    <div class="container">
        <a class="btn btn-primary" [routerLink]="['/'+appUrl+'/new/create']"><span class="glyphicons glyphicons-plus-sign"></span><span>Ajouter</span></a>
        <button *ngIf="filterBy" class="btn btn-success" (click)="cloneItem()"><span class="glyphicons glyphicons-plus-sign"></span><span>Ajouter ({{ (item) ? item.genre.nom : filterBy }})</span></button>
    </div>    
</div>
